<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Abend der Blasmusik</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
body {
  font-family: 'Arial', sans-serif;
  margin: 0;
  padding: 0;
  background-color: #f4f4f4;
  color: #333;
}

html, body {
  overscroll-behavior-y: none;
}

.header {
  text-align: center;
  background-color: #101A4B;
  color: white;
  padding: 10px 0;
}

h1 {
  font-size: 24px; 
  line-height: 24px; 
  margin: 0;
}

.selected-order-row {
  background-color: yellow;
  color: black;
}

/* Einheitliches Layout f√ºr Reihen-, Tisch- und Personenauswahl */
.button-group {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 10px;
}

.row-button, .table-button, .person-button {
  padding: 10px 20px;
  font-size: 16px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  flex: 1 1 150px;
  min-width: 100px;
  max-width: 150px;
  text-align: center;
}

/* Farben f√ºr verschiedene Schaltfl√§chen */
.row-button {
  background-color: #ffcc00; /* Gelb */
  color: black;
}

.table-button {
  background-color: #3498db; /* Blau */
  color: white;
}

.person-button {
  background-color: #2ecc71; /* Gr√ºn */
  color: white;
}

/* Hover-Effekte */
.row-button:hover {
  background-color: #e6b800;
}

.table-button:hover {
  background-color: #217dbb;
}

.person-button:hover {
  background-color: #27ae60;
}

/* Aktiver Button */
.row-button.active, 
.table-button.active, 
.person-button.active {
  background-color: #ddd;
  color: black;
}

/* Deaktivierte Buttons */
.button-disabled {
  background-color: #d3d3d3;
  color: #808080;
  cursor: not-allowed;
  pointer-events: none;
}

.product-buttons-container {
  margin: 2px;
}

.product-buttons-row {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin-bottom: 10px;
}

.product-button {
  padding: 12px 25px;
  font-size: 14px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  width: 120px;
  margin: 5px;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
}

.essen-button {
  background-color: #E74C3C;
  color: white;
}

.getraenke-button {
  background-color: #377EBF;
  color: white;
}

#orderTable {
  width: 100%;
  border-collapse: collapse;
  margin: 5px 0;
}

#orderTable th, #orderTable td {
  padding: 5px;
  border: 1px solid #ddd;
  text-align: center;
  font-size: 16px;
  background-color: white;
}

.quantity-controls {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
}

.quantity-controls button {
  background-color: #ddd;
  border: none;
  padding: 5px 10px;
  font-size: 16px;
  cursor: pointer;
  border-radius: 5px;
}

.quantity-controls button:hover {
  background-color: #bbb;
}

.centered-heading {
  text-align: center;
}

.total-sum {
  text-align: center;
  font-size: 20px;
  font-weight: bold;
  margin-top: 10px;
}

.button-container {
  text-align: center;
  margin-top: 20px;
}

.button-container button {
  padding: 12px 25px;
  font-size: 14px;
  background-color: #E74C3C;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

.button-container button:hover {
  background-color: #C0392B;
}

.payment-dialog {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: white;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
  text-align: center;
  z-index: 1000;
  width: 80%;
  max-width: 400px;
  height: 80%;
  max-height: 800px;
  overflow-y: auto;
}

.payment-dialog .table-selection,
.payment-dialog .person-selection {
  margin-bottom: 20px;
}

.payment-dialog .person-selection {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
}

.payment-dialog .person-button {
  flex: 0 0 auto;
}

.payment-dialog h3 {
  margin-top: 0;
  text-align: center;
}

.payment-dialog input {
  width: 180px;
  font-size: 24px;
  text-align: right;
  padding: 5px;
}

.calc-buttons {
  display: grid;
  grid-template-columns: repeat(3, 60px);
  gap: 10px;
  justify-content: center;
  margin-top: 10px;
}

.calc-buttons button {
  font-size: 20px;
  padding: 10px;
  border: none;
  background-color: #ddd;
  cursor: pointer;
  border-radius: 5px;
}

.calc-buttons button:hover {
  background-color: #bbb;
}

.close-button, .ok-button {
  margin-top: 10px;
  padding: 10px 20px;
  background-color: #E74C3C;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

.close-button:hover, .ok-button:hover {
  background-color: #C0392B;
}
  </style>
</head>
<body>
  <div class="header">
    <h1>JBO K√ºrnach</h1>
  </div>

  <div id="bedienungNameDisplay" style="text-align: center; margin: 10px 0; font-weight: bold;"></div>
    
    
<div class="row-buttons">
  <button class="row-button" id="row1" onclick="selectRow(1)">Reihe 1</button>
  <button class="row-button" id="row2" onclick="selectRow(2)">Reihe 2</button>
  <button class="row-button" id="row3" onclick="selectRow(3)">Reihe 3</button>
  <button class="row-button" id="row4" onclick="selectRow(4)">Reihe 4</button>
  <button class="row-button" id="row5" onclick="selectRow(5)">Reihe 5</button>
  <button class="row-button" id="row6" onclick="selectRow(6)">Reihe 6</button>
</div>
    
    
 <div class="table-selection">
    <button class="table-button" onclick="selectTable(1)">Tisch 1</button>
    <button class="table-button" onclick="selectTable(2)">Tisch 2</button>
    <button class="table-button" onclick="selectTable(3)">Tisch 3</button>
    <button class="table-button" onclick="selectTable(4)">Tisch 4</button>
    <button class="table-button" onclick="selectTable(5)">Tisch 5</button> <!-- Neuer Tisch 5 -->
    <button class="table-button" onclick="selectTable(6)">Tisch 6</button> <!-- Neuer Tisch 6 -->
</div>

  <div class="person-container" id="personSelection"></div>

  <div id="productButtons" class="product-buttons-container">
    <h3 class="centered-heading">Essen</h3>
    <div class="product-buttons-row" id="essenButtons"></div>
    <h3 class="centered-heading">Getr√§nke</h3>
    <div class="product-buttons-row" id="getraenkeButtons"></div>
  </div>

  <table id="orderTable">
    <thead>
      <tr>
        <th>Produkt</th>
        <th>Menge</th>
        <th>Einzelpreis (‚Ç¨)</th>
        <th>Gesamtpreis (‚Ç¨)</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <h3 class="total-sum">Gesamtsumme (‚Ç¨): <span id="totalSum">0.00</span>‚Ç¨</h3>

<div class="button-container">
  <button id="sendOrderButton">Jetzt bestellen</button>
  <button onclick="togglePaymentDialog()">Zahlung</button>
  <button onclick="resetOrder()">Neuer Kunde</button>
  </div>
    
  <div class="payment-dialog" id="paymentDialog">
    <h3>Zahlung</h3>
      
  <div class="row-selection">
  <button class="row-button" onclick="selectPaymentRow(1)">Reihe 1</button>
  <button class="row-button" onclick="selectPaymentRow(2)">Reihe 2</button>
  <button class="row-button" onclick="selectPaymentRow(3)">Reihe 3</button>
  <button class="row-button" onclick="selectPaymentRow(4)">Reihe 4</button>
  <button class="row-button" onclick="selectPaymentRow(5)">Reihe 5</button>
  <button class="row-button" onclick="selectPaymentRow(6)">Reihe 6</button>
</div>
      
      
<!-- F√ºr jede Reihe -->
<div class="row-container" id="row1">
  <div class="table-selection">
    <button class="table-button" onclick="selectTable(1, 1)">Tisch 1</button>
    <button class="table-button" onclick="selectTable(1, 2)">Tisch 2</button>
    <button class="table-button" onclick="selectTable(1, 3)">Tisch 3</button>
    <button class="table-button" onclick="selectTable(1, 4)">Tisch 4</button>
    <button class="table-button" onclick="selectTable(1, 5)">Tisch 5</button>
    <button class="table-button" onclick="selectTable(1, 6)">Tisch 6</button>
  </div>
 
    
    <div class="person-selection" id="paymentPersonSelection"></div>
    
    <p>Zu zahlender Betrag: <span id="paymentAmountToPay">0.00</span>‚Ç¨</p>
    <input type="text" id="paymentAmount" readonly>
    <div class="calc-buttons">
      <button onclick="addNumber(7)">7</button>
      <button onclick="addNumber(8)">8</button>
      <button onclick="addNumber(9)">9</button>
      <button onclick="addNumber(4)">4</button>
      <button onclick="addNumber(5)">5</button>
      <button onclick="addNumber(6)">6</button>
      <button onclick="addNumber(1)">1</button>
      <button onclick="addNumber(2)">2</button>
      <button onclick="addNumber(3)">3</button>
      <button onclick="addNumber(0)">0</button>
      <button onclick="addComma()">,</button>
      <button onclick="clearPayment()">C</button>
    </div>
    <h4>R√ºckgeld: <span id="changeAmount">0.00</span>‚Ç¨</h4>
    <button class="ok-button" onclick="completePayment()">OK</button>
    <button class="close-button" onclick="togglePaymentDialog()">Schlie√üen</button>
  </div>

  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script>
const socket = io('https://bedithek.onrender.com'); // Verbindung zum Server herstellen
let allOrders = {};

socket.on('connect', () => {
  console.log('‚úÖ Bedienung-Verbindung zum Server hergestellt.');
  socket.emit('requestInitialData');
});

socket.on("initialData", (data) => {
  allOrders = data;
  updateOrderDisplay();
});

socket.on('disconnect', () => {
  console.warn('‚ö†Ô∏è Bedienung-Verbindung zum Server verloren.');
});

socket.on('orderUpdate', (updatedOrders) => {
  allOrders = updatedOrders;
  updateOrderDisplay();
});

function updateOrderDisplay() {
  const orderList = document.getElementById('orderList');
  orderList.innerHTML = '';
  
  for (const [row, tables] of Object.entries(allOrders)) {
    for (const [table, persons] of Object.entries(tables)) {
      for (const [person, order] of Object.entries(persons)) {
        const orderElement = createOrderElement(row, table, person, order);
        orderList.appendChild(orderElement);
      }
    }
  }
}

function createOrderElement(row, table, person, order) {
  const element = document.createElement('div');
  element.className = 'order-item';
  element.innerHTML = `
    <h4>Reihe ${row}, Tisch ${table}, Person ${person}</h4>
    <ul>
      ${Object.entries(order).map(([name, item]) => 
        `<li>${item.quantity}x ${name}</li>`).join('')}
    </ul>
  `;
  return element;
}

function sendNewOrder(orderData) {
  socket.emit("sendOrder", orderData);
}

      
      
      
    const products = [
      { name: "Bratwurst, gezwickt", price: 3.5, category: "essen" },
      { name: "Bratwurst mit Kraut", price: 8.5, category: "essen" },
      { name: "Camenbert, gebacken", price: 4.2, category: "essen" },       
      { name: "Obatzter", price: 3.2, category: "essen" },
      { name: "Pommes", price: 2.5, category: "essen" },
      { name: "Salat", price: 4.0, category: "essen" },
      { name: "Alkoholfreies Bier", price: 3.6, category: "getraenke" },
      { name: "Alkoholfreies Hefe", price: 3.6, category: "getraenke" }, 
      { name: "Apfelschorle", price: 2.0, category: "getraenke" },
      { name: "Bier", price: 4.8, category: "getraenke" },
      { name: "Cola", price: 3.0, category: "getraenke" },
      { name: "Fanta", price: 3.0, category: "getraenke" },
      { name: "Hefeweizen", price: 3.8, category: "getraenke" },
      { name: "Radler", price: 3.6, category: "getraenke" },
      { name: "Spezi", price: 2.5, category: "getraenke" },
      { name: "Wasser spritzig", price: 2.0, category: "getraenke" },
      { name: "Wasser still", price: 2.0, category: "getraenke" }
    ];

    let bedienungName = ''; 
      let currentRow = 1;
    let currentTable = 1;
    let currentPerson = 1;
  let tables = {
    1: { persons: [{}, {}, {}, {}, {}, {}] },
    2: { persons: [{}, {}, {}, {}, {}, {}] },
    3: { persons: [{}, {}, {}, {}, {}, {}] },
    4: { persons: [{}, {}, {}, {}, {}, {}] },
    5: { persons: [{}, {}, {}, {}, {}, {}] },  // Neuer Tisch 5
    6: { persons: [{}, {}, {}, {}, {}, {}] }   // Neuer Tisch 6
};
    let paymentDialogTable = 1;
    let selectedPersons = [];
let sentOrders = {
    1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {}  // F√ºr Tische 1 bis 6
};

  function selectPaymentRow(rowNumber) {
      currentRow = rowNumber;
      document.querySelectorAll('.row-button').forEach(btn => btn.classList.remove('active'));
      document.querySelector(`.row-button:nth-child(${rowNumber})`).classList.add('active');
      updatePaymentPersonSelection();
    }

      function selectRow(rowNumber) {
  currentRow = rowNumber;
  document.querySelectorAll('.row-button').forEach(btn => btn.classList.remove('active'));
  document.querySelector(`#row${rowNumber}`).classList.add('active');
  // F√ºge hier weitere Logik hinzu, um mit der Auswahl der Reihe fortzufahren
}

      function selectPaymentTable(tableNumber) {
      paymentDialogTable = tableNumber;
      document.querySelectorAll('.table-button').forEach(btn => btn.classList.remove('active'));
      document.querySelector(`.table-button:nth-child(${tableNumber})`).classList.add('active');
      updatePaymentPersonSelection();
    }

    
      function selectTable(tableNumber) {
  currentTable = tableNumber;
  currentPerson = 1;
  document.querySelectorAll('.table-button').forEach(btn => btn.classList.remove('active'));
  document.querySelector(`.table-button:nth-child(${tableNumber})`).classList.add('active');
  renderPersonButtons();
  renderOrder();
  // Initialisieren Sie sentOrders f√ºr den neuen Tisch, falls noch nicht vorhanden
  if (!sentOrders[currentTable]) {
    sentOrders[currentTable] = {};
  }
}

    function renderPersonButtons() {
      const personSelection = document.getElementById("personSelection");
      personSelection.innerHTML = "";
      for (let i = 1; i <= 6; i++) {
        const button = document.createElement("button");
        button.textContent = `Person ${i}`;
        button.className = `person-button ${i === currentPerson ? 'active' : ''}`;
        button.onclick = () => selectPerson(i);
        personSelection.appendChild(button);
      }
    }

    function promptForBedienungName() {
      let name = prompt("Bitte geben Sie Ihren Namen ein:", "");
      if (name != null && name.trim() !== "") {
        bedienungName = name.trim();
        document.getElementById('bedienungNameDisplay').textContent = `Bedienung: ${bedienungName}`;
      } else {
        alert("Bitte geben Sie einen g√ºltigen Namen ein.");
        promptForBedienungName();
      }
    }

      
      function selectPerson(personNumber) {
  currentPerson = personNumber;
  document.querySelectorAll('.person-button').forEach(btn => btn.classList.remove('active'));
  document.querySelector(`.person-button:nth-child(${personNumber})`).classList.add('active');
  renderOrder();
  // Initialisieren Sie sentOrders f√ºr die neue Person, falls noch nicht vorhanden
  if (!sentOrders[currentTable][currentPerson]) {
    sentOrders[currentTable][currentPerson] = {};
  }
}

    function togglePaymentDialog() {
      const dialog = document.getElementById("paymentDialog");
      paymentDialogTable = currentTable;
      selectedPersons = [];
      updatePaymentPersonSelection();
      updatePaymentTotal();
      dialog.style.display = (dialog.style.display === "none" || dialog.style.display === "") ? "block" : "none";
    }

    function addNumber(num) {
      document.getElementById("paymentAmount").value += num;
      updateChange();
    }

    function addComma() {
      const input = document.getElementById("paymentAmount");
      if (!input.value.includes(",")) input.value += ",";
      updateChange();
    }

    function clearPayment() {
      document.getElementById("paymentAmount").value = "";
      updateChange();
    }

    function updateChange() {
      const totalAmount = parseFloat(document.getElementById("paymentAmountToPay").textContent);
      const paidAmount = parseFloat(document.getElementById("paymentAmount").value.replace(',', '.') || 0);
      const change = paidAmount - totalAmount;
      document.getElementById("changeAmount").textContent = change.toFixed(2);
    }

    function addProductToOrder(name) {
      const product = products.find(p => p.name === name);
      if (product) {
        const personOrder = tables[currentTable].persons[currentPerson - 1];
        const existingProduct = personOrder[name];
        if (existingProduct) {
          existingProduct.quantity++;
        } else {
          personOrder[name] = { ...product, quantity: 1 };
        }
        renderOrder();
        saveOrdersToLocalStorage();
      }
    }

    function adjustQuantity(name, delta) {
      const personOrder = tables[currentTable].persons[currentPerson - 1];
      const product = personOrder[name];
      if (product) {
        product.quantity += delta;
        if (product.quantity < 1) {
          delete personOrder[name];
        }
        renderOrder();
        saveOrdersToLocalStorage();
      }
    }

  function renderOrder() {
  const tbody = document.querySelector("#orderTable tbody");
  tbody.innerHTML = "";
  const personOrder = tables[currentTable].persons[currentPerson - 1];
  
  // Iteriere √ºber die Produkte und f√ºge die Markierung f√ºr die ausgew√§hlte Person hinzu
  Object.values(personOrder).forEach(product => {
    const row = document.createElement("tr");
    row.classList.add('order-row'); // Standardklasse f√ºr eine Zeile
    
    // Hier wird √ºberpr√ºft, ob dieses Produkt f√ºr die aktuelle Person markiert werden soll
    if (selectedPersons.includes(currentPerson)) {
      row.classList.add('selected-order-row'); // F√ºge die Markierung hinzu
    }
    
    row.innerHTML = `
      <td>${product.name}</td>
      <td class="quantity-controls">
        <button onclick="adjustQuantity('${product.name}', -1)">-</button>
        ${product.quantity}
        <button onclick="adjustQuantity('${product.name}', 1)">+</button>
      </td>
      <td>${product.price.toFixed(2)}</td>
      <td>${(product.price * product.quantity).toFixed(2)}</td>
    `;
    
    tbody.appendChild(row);
  });
  
  // Berechne den Gesamtbetrag
  document.getElementById("totalSum").textContent = calculateTotal().toFixed(2);
}

    function calculateTotal() {
      const personOrder = tables[currentTable].persons[currentPerson - 1];
      return Object.values(personOrder).reduce((sum, product) => sum + product.price * product.quantity, 0);
    }

 function sendOrderToTheke() {
  if (!currentRow || !currentTable || !currentPerson) {
    console.error("‚ùå Fehler: Reihen-, Tisch- oder Person-Nummer fehlt!");
    alert("Bitte Reihe, Tisch und Person ausw√§hlen!");
    return;
  }

  // Sicherstellen, dass sentOrders[currentTable][currentPerson] existiert
  if (!sentOrders[currentTable]) sentOrders[currentTable] = {};
  if (!sentOrders[currentTable][currentPerson]) sentOrders[currentTable][currentPerson] = {};

  const orderData = {
    bedienung: bedienungName || "Unbekannt", // Falls nicht gesetzt, "Unbekannt" als Fallback
    timestamp: Date.now(), // ‚úÖ Aktuelle Zeit als Timestamp hinzuf√ºgen
    row: currentRow,       // ‚úÖ Reihen-Nummer
    table: currentTable,   // ‚úÖ Tisch-Nummer
    person: currentPerson, // ‚úÖ Personen-Nummer
    order: {}              // ‚úÖ Bestellung wird hier gef√ºllt
  };

  const personOrder = tables[currentTable].persons[currentPerson - 1];
  let hasNewItems = false;

  for (const [productName, product] of Object.entries(personOrder)) {
    const orderId = `${productName}`;
    const previousQuantity = sentOrders[currentTable][currentPerson][orderId] || 0;

    if (product.quantity > previousQuantity) {
      const newQuantity = product.quantity - previousQuantity;
      orderData.order[productName] = { ...product, quantity: newQuantity };
      sentOrders[currentTable][currentPerson][orderId] = product.quantity;
      hasNewItems = true;
    }
  }

  if (hasNewItems) {
    socket.emit("sendOrder", orderData); // ‚úÖ Bestellung wird an die Theke gesendet
    console.log("üì¶ Neue Bestellung gesendet:", orderData);
    alert("Bestellung wurde an die Theke gesendet.");
  } else {
    console.log("‚ö†Ô∏è Keine neuen Produkte zum Senden.");
    alert("Keine neuen Produkte zum Senden.");
  }
}
    function selectPaymentTable(tableNumber) {
      paymentDialogTable = tableNumber;
      updatePaymentPersonSelection();
      updatePaymentTotal();
    }

    function updatePaymentPersonSelection() {
      const container = document.getElementById("paymentPersonSelection");
      container.innerHTML = "";
      
      for (let i = 1; i <= 6; i++) {
        const button = document.createElement("button");
        button.textContent = `Person ${i}`;
        button.className = `person-button ${selectedPersons.includes(i) ? 'active' : ''}`;
        button.onclick = () => togglePaymentPerson(i);
        container.appendChild(button);
      }
    }

    function togglePaymentPerson(personNumber) {
      const index = selectedPersons.indexOf(personNumber);
      if (index === -1) {
        selectedPersons.push(personNumber);
      } else {
        selectedPersons.splice(index, 1);
      }
      updatePaymentTotal();
      updatePaymentPersonSelection();
    }

    function updatePaymentTotal() {
      let total = 0;
      selectedPersons.forEach(person => {
        const personOrder = tables[paymentDialogTable].persons[person - 1];
        total += Object.values(personOrder).reduce((sum, product) => sum + product.price * product.quantity, 0);
      });
      document.getElementById("paymentAmountToPay").textContent = total.toFixed(2);
      updateChange();
    }

    function completePayment() {
      if (selectedPersons.lengath === 0) {
        alert("Bitte w√§hlen Sie mindestens eine Person aus!");
        return;
      }

selectedPersons.forEach(person => {
        // Bestellung f√ºr die Person l√∂schen
        tables[paymentDialogTable].persons[person - 1] = {};
        // Signal an den Server senden, dass die Bestellung bezahlt wurde
        socket.emit('orderPaid', {
            row: currentRow, // Zeilen-Nummer hinzuf√ºgen
            table: paymentDialogTable,
            person: person,
        });
    });
      
      saveOrdersToLocalStorage();
      alert(`Zahlung f√ºr Tisch ${paymentDialogTable}, Personen ${selectedPersons.join(', ')} abgeschlossen!`);
      selectedPersons = [];
      renderOrder();
      togglePaymentDialog();
    }

    function resetOrder() {
      tables[currentTable].persons[currentPerson - 1] = {};
      renderOrder();
      document.getElementById("paymentAmount").value = "";
      document.getElementById("changeAmount").textContent = "0.00";
      saveOrdersToLocalStorage();
      sentOrders = {};
    }

    function renderProductButtons() {
      const essenButtons = document.getElementById("essenButtons");
      const getraenkeButtons = document.getElementById("getraenkeButtons");
      
      essenButtons.innerHTML = '';
      getraenkeButtons.innerHTML = '';
      
      products.forEach(product => {
        const button = document.createElement("button");
        button.textContent = product.name;
        button.className = `product-button ${product.category}-button`;
        button.onclick = () => addProductToOrder(product.name);
        
        if (product.category === "essen") {
          essenButtons.appendChild(button);
        } else {
          getraenkeButtons.appendChild(button);
        }
      });
    }

function markOrderAsPaid() {
  const orderData = {
    row: currentRow,
    table: currentTable,
    person: currentPerson
  };

  socket.emit('orderPaid', orderData); // Bestellung als bezahlt markieren
  console.log(`Bestellung f√ºr Reihe: ${currentRow}, Tisch: ${currentTable}, Person: ${currentPerson} wurde als bezahlt markiert.`);
}
    

    function saveOrdersToLocalStorage() {
      localStorage.setItem('tables', JSON.stringify(tables));
    }

    function loadOrdersFromLocalStorage() {
      const savedTables = localStorage.getItem('tables');
      if (savedTables) {
        tables = JSON.parse(savedTables);
      }
    }

    // Initialisierung
    window.onload = function() {
      promptForBedienungName();
      loadOrdersFromLocalStorage();
      renderProductButtons();
      renderPersonButtons();
      selectTable(1);

      document.getElementById('sendOrderButton').addEventListener('click', function(e) {
        e.preventDefault();
        this.disabled = true;
        sendOrderToTheke();
        setTimeout(() => this.disabled = false, 2000); // Re-enable after 2 seconds
      });
    };
  </script>
</body>
</html>
